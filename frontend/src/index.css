@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   EXAM VIEW ANIMATIONS & EFFECTS
   ============================================ */

/* Confetti Animation */
@keyframes confetti-fall {
  0% {
    transform: translateY(0) rotate(0deg);
    opacity: 1;
  }

  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

.animate-confetti {
  animation: confetti-fall 3s ease-out forwards;
}

/* Success Check Animation */
@keyframes success-pop {
  0% {
    transform: scale(0);
    opacity: 0;
  }

  50% {
    transform: scale(1.2);
  }

  100% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes success-circle {
  0% {
    stroke-dasharray: 0 157;
  }

  100% {
    stroke-dasharray: 157 157;
  }
}

@keyframes success-check {
  0% {
    stroke-dasharray: 0 50;
  }

  100% {
    stroke-dasharray: 50 50;
  }
}

.animate-success-pop {
  animation: success-pop 0.4s ease-out forwards;
}

.animate-success-circle {
  stroke-dasharray: 0 157;
  animation: success-circle 0.4s ease-out 0.1s forwards;
}

.animate-success-check {
  stroke-dasharray: 0 50;
  animation: success-check 0.3s ease-out 0.4s forwards;
}

/* Shake Animation */
@keyframes shake {

  0%,
  100% {
    transform: translateX(0);
  }

  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translateX(-4px);
  }

  20%,
  40%,
  60%,
  80% {
    transform: translateX(4px);
  }
}

.animate-shake {
  animation: shake 0.5s ease-in-out;
}

/* Slide Transitions */
@keyframes slide-in-left {
  0% {
    transform: translateX(-20px);
    opacity: 0;
  }

  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slide-in-right {
  0% {
    transform: translateX(20px);
    opacity: 0;
  }

  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slide-in-up {
  0% {
    transform: translateY(20px);
    opacity: 0;
  }

  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slide-in-down {
  0% {
    transform: translateY(-20px);
    opacity: 0;
  }

  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-slide-in-left {
  animation: slide-in-left 0.3s ease-out forwards;
}

.animate-slide-in-right {
  animation: slide-in-right 0.3s ease-out forwards;
}

.animate-slide-in-up {
  animation: slide-in-up 0.3s ease-out forwards;
}

.animate-slide-in-down {
  animation: slide-in-down 0.3s ease-out forwards;
}

/* Fade In Animation */
@keyframes fade-in {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out forwards;
}

/* Scale Pop Animation */
@keyframes scale-pop {
  0% {
    transform: scale(0.95);
    opacity: 0;
  }

  50% {
    transform: scale(1.02);
  }

  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Question text editor sizing */
.question-quill {
  min-height: 280px;
}

.question-quill .ql-container {
  min-height: 280px;
  border: 0;
}

.question-quill .ql-editor {
  min-height: 240px;
  padding: 16px 18px;
}

.animate-scale-pop {
  animation: scale-pop 0.25s ease-out forwards;
}

/* Answer Select Animation */
@keyframes answer-select {
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.98);
  }

  100% {
    transform: scale(1);
  }
}

.animate-answer-select {
  animation: answer-select 0.15s ease-out;
}

/* Pulse Ring Animation */
@keyframes pulse-ring {
  0% {
    box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
  }

  70% {
    box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
  }

  100% {
    box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
  }
}

.animate-pulse-ring {
  animation: pulse-ring 1s ease-out;
}

/* Question Transition */
.question-transition-enter {
  opacity: 0;
  transform: translateX(20px);
}

.question-transition-enter-active {
  opacity: 1;
  transform: translateX(0);
  transition: opacity 0.2s ease-out, transform 0.2s ease-out;
}

.question-transition-exit {
  opacity: 1;
  transform: translateX(0);
}

.question-transition-exit-active {
  opacity: 0;
  transform: translateX(-20px);
  transition: opacity 0.2s ease-out, transform 0.2s ease-out;
}

/* ============================================
   ACCESSIBILITY - DYSLEXIA FRIENDLY FONT
   ============================================ */
.dyslexia-font,
.dyslexia-font * {
  font-family: 'OpenDyslexic', 'Comic Sans MS', 'Arial', sans-serif !important;
  letter-spacing: 0.05em;
  word-spacing: 0.1em;
  line-height: 1.8 !important;
}

/* Better focus indicators for accessibility */
.focus-visible-ring:focus-visible {
  outline: none;
  ring: 2px solid;
  ring-color: #6366f1;
  ring-offset: 2px;
}

/* Skip to content link */
.skip-to-content {
  position: absolute;
  left: -9999px;
  z-index: 9999;
  padding: 1rem;
  background: #6366f1;
  color: white;
  text-decoration: none;
  font-weight: 600;
}

.skip-to-content:focus {
  left: 50%;
  transform: translateX(-50%);
  top: 0;
}

/* High contrast focus ring */
.high-contrast-focus:focus {
  outline: 3px solid #000 !important;
  outline-offset: 2px !important;
}

.dark .high-contrast-focus:focus {
  outline-color: #fff !important;
}

/* ============================================
   SKELETON LOADING ANIMATION
   ============================================ */
@keyframes skeleton-shimmer {
  0% {
    background-position: -200% 0;
  }

  100% {
    background-position: 200% 0;
  }
}

.skeleton-shimmer {
  background: linear-gradient(90deg,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.4) 50%,
      rgba(255, 255, 255, 0) 100%);
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s infinite;
}

.dark .skeleton-shimmer {
  background: linear-gradient(90deg,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.1) 50%,
      rgba(255, 255, 255, 0) 100%);
  background-size: 200% 100%;
}

/* ============================================
   MODAL SLIDE-IN ANIMATIONS
   ============================================ */
@keyframes modal-slide-in {
  0% {
    opacity: 0;
    transform: scale(0.95) translateY(10px);
  }

  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

@keyframes modal-backdrop-fade {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

.animate-modal-in {
  animation: modal-slide-in 0.2s ease-out forwards;
}

.animate-backdrop-fade {
  animation: modal-backdrop-fade 0.2s ease-out forwards;
}

/* Bottom sheet modal for mobile */
@keyframes bottom-sheet-slide {
  0% {
    transform: translateY(100%);
  }

  100% {
    transform: translateY(0);
  }
}

.animate-bottom-sheet {
  animation: bottom-sheet-slide 0.3s ease-out forwards;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;

    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;

    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }

  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
  }
}

/* RTL Support: Keep logos and navbars in LTR direction */
[dir="rtl"] .logo,
[dir="rtl"] nav,
[dir="rtl"] .navbar,
[dir="rtl"] .ltr-content {
  direction: ltr;
}

/* Keep logo images and brand elements LTR */
[dir="rtl"] .logo img,
[dir="rtl"] .logo svg,
[dir="rtl"] .brand {
  direction: ltr;
}

/* ============================================
   NEW LANDING PAGE AESTHETICS (OUTFIT & BENTO)
   ============================================ */

body {
  font-family: 'Outfit', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* 3D Perspective Utilities */
.perspective-1000 {
  perspective: 1000px;
}

.perspective-2000 {
  perspective: 2000px;
}

.transform-style-3d {
  transform-style: preserve-3d;
}

.rotate-x-12 {
  transform: rotateX(12deg);
}

.rotate-y-12 {
  transform: rotateY(12deg);
}

.rotate-y-n12 {
  transform: rotateY(-12deg);
}

/* Bento Grid Utilities */
.bento-grid {
  display: grid;
  grid-template-columns: repeat(1, 1fr);
  gap: 1.5rem;
}

@media (min-width: 768px) {
  .bento-grid {
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(2, minmax(250px, auto));
  }

  .bento-col-span-2 {
    grid-column: span 2;
  }

  .bento-row-span-2 {
    grid-row: span 2;
  }
}

/* Background Patterns */
.bg-grid-pattern {
  background-size: 40px 40px;
  background-image:
    linear-gradient(to right, rgba(99, 102, 241, 0.05) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(99, 102, 241, 0.05) 1px, transparent 1px);
}

.dark .bg-grid-pattern {
  background-image:
    linear-gradient(to right, rgba(255, 255, 255, 0.05) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
}

.bg-noise {
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
}

/* Glassmorphism Refined */
.glass-card {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.5);
}

.dark .glass-card {
  background: rgba(15, 23, 42, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.05);
}

/* Shine Effect */
.shine-effect {
  position: relative;
  overflow: hidden;
}

.shine-effect::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(to right,
      transparent,
      rgba(255, 255, 255, 0.2),
      transparent);
  transform: skewX(-20deg);
  animation: shine 6s infinite;
}

@keyframes shine {
  0% {
    left: -100%;
  }

  20% {
    left: 200%;
  }

  100% {
    left: 200%;
  }
}

/* Phone Frame Mockup */
.phone-frame {
  position: relative;
  width: 280px;
  height: 580px;
  background: #0f172a;
  border-radius: 40px;
  border: 8px solid #334155;
  box-shadow: 0 50px 100px -20px rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.phone-frame::before {
  content: '';
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 120px;
  height: 25px;
  background: #334155;
  border-bottom-left-radius: 15px;
  border-bottom-right-radius: 15px;
  z-index: 10;
}

/* Stepper Connector */
.stepper-line {
  position: absolute;
  top: 2rem;
  left: 50%;
  width: 2px;
  height: calc(100% - 2rem);
  background: linear-gradient(to bottom, #6366f1, #a855f7, transparent);
  z-index: 0;
}

@media (min-width: 768px) {
  .stepper-line-horizontal {
    position: absolute;
    top: 2rem;
    left: 2rem;
    width: calc(100% - 4rem);
    height: 2px;
    background: linear-gradient(to right, #6366f1, #a855f7, #6366f1);
    z-index: 0;
  }
}

/* Mask Fade */
.mask-fade-bottom {
  mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
}

.animation-delay-2000 {
  animation-delay: 2s;
}

.animate-spin-slow {
  animation: spin 8s linear infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}